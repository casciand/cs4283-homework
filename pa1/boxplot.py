import seaborn as sns
import matplotlib.pyplot as plt
import numpy as np

# Data from experiment
health_proto = [8.816, 2.864, 1.531, 1.781, 4.232, 1.099, 3.414, 2.829, 5.583, 3.734, 6.589, 2.53, 2.62, 5.094, 2.474, 3.728, 6.835, 2.28, 3.157, 2.372, 4.28, 2.319, 3.954, 3.596, 3.213, 2.815, 4.145, 2.494, 2.926, 2.985, 1.68, 5.849, 3.311, 1.534, 5.947, 1.704, 3.342, 3.694, 2.546, 4.338, 2.285, 2.936, 5.466, 3.434, 1.932, 2.294, 2.926, 1.827, 3.682, 3.768, 2.506, 4.104, 1.989, 0.991, 5.71, 3.901, 2.099, 3.374, 2.627, 2.14, 3.956, 5.502, 2.43, 5.46, 3.778, 3.151, 3.233, 2.743, 3.266, 4.991, 3.793, 7.273, 2.046, 1.909, 2.004, 2.424, 9.598, 5.008, 4.93, 4.048, 3.039, 1.686, 3.485, 5.671, 4.486, 3.243, 3.043, 3.203, 1.837, 3.957, 2.28, 3.186, 1.259, 5.989, 3.98, 4.076, 4.338, 3.043, 2.243, 2.46]
order_proto = [5.839, 2.786, 2.581, 2.04, 2.774, 1.427, 1.558, 1.667, 1.64, 2.818, 1.681, 2.706, 2.931, 1.308, 3.393, 3.023, 2.824, 3.217, 2.78, 3.393, 1.507, 1.446, 1.646, 5.48, 3.062, 1.552, 2.342, 1.789, 2.794, 2.506, 2.764, 2.745, 2.804, 1.354, 3.47, 1.69, 1.141, 1.749, 1.745, 2.316, 2.27, 1.23, 1.68, 1.597, 1.958, 1.41, 2.428, 2.626, 2.392, 3.938, 1.746, 2.333, 3.638, 0.874, 1.371, 1.819, 1.776, 2.335, 7.489, 2.851, 2.135, 4.596, 1.785, 9.105, 3.032, 2.289, 3.624, 3.171, 3.346, 2.126, 3.145, 2.166, 2.635, 1.456, 3.022, 2.72, 2.292, 10.918, 2.578, 3.102, 2.509, 2.483, 1.404, 2.253, 2.282, 2.141, 3.788, 2.164, 3.529, 2.06, 2.117, 2.476, 2.981, 3.048, 1.903, 2.029, 2.135, 2.693, 4.473, 2.476]
health_flatbuf = [2.259, 9.164, 5.308, 5.808, 6.158, 6.332, 1.147, 2.453, 3.073, 1.952, 1.343, 5.699, 10.575, 4.415, 1.644, 6.117, 4.537, 1.171, 2.124, 12.93, 5.368, 4.161, 1.068, 1.256, 5.841, 1.41, 0.914, 2.737, 0.821, 1.445, 4.266, 2.894, 3.726, 2.773, 2.021, 2.254, 4.526, 3.762, 5.198, 3.409, 1.059, 7.381, 4.033, 3.234, 1.633, 2.554, 1.246, 1.183, 4.84, 5.424, 3.969, 3.973, 2.153, 3.63, 10.218, 15.165, 5.344, 5.011, 2.463, 2.567, 2.739, 4.82, 10.307, 2.806, 2.229, 2.152, 1.379, 2.131, 1.268, 3.059, 2.923, 9.316, 3.844, 1.717, 1.372, 1.695, 1.683, 1.223, 2.538, 2.212, 3.572, 0.991, 0.994, 7.167, 4.594, 4.103, 2.668, 4.136, 11.129, 6.305, 3.03, 1.859, 2.214, 3.536, 3.997, 1.579, 3.649, 2.398, 2.341, 1.72]
order_flatbuf = [21.606, 12.102, 4.072, 3.881, 7.501, 4.583, 1.709, 2.605, 5.743, 3.687, 1.411, 7.12, 4.042, 4.411, 2.373, 2.205, 7.179, 2.8, 2.518, 7.768, 2.499, 3.347, 1.852, 1.754, 3.623, 2.165, 2.73, 5.691, 1.348, 1.243, 4.355, 10.071, 3.69, 5.981, 2.525, 2.128, 8.168, 12.186, 4.559, 2.719, 1.837, 2.025, 5.973, 4.339, 2.121, 2.799, 3.323, 1.555, 2.17, 4.412, 6.142, 2.812, 2.063, 2.039, 7.046, 5.938, 2.61, 3.869, 2.302, 1.384, 2.705, 4.776, 3.623, 14.881, 3.53, 1.704, 1.742, 8.513, 2.396, 3.294, 1.914, 5.244, 12.256, 5.589, 2.216, 2.74, 2.898, 4.833, 3.073, 2.462, 7.43, 2.624, 1.78, 4.219, 6.127, 5.029, 2.517, 3.46, 3.268, 2.85, 6.96, 1.739, 3.818, 2.498, 10.342, 5.824, 3.206, 2.613, 3.207, 3.815]

# Create a figure with multiple subplots
fig, axes = plt.subplots(nrows=2, ncols=2, figsize=(12, 4))

# Create box plots for each dataset on separate subplots
sns.boxplot(data=health_proto, orient="h", ax=axes[0][0], width=0.3, showfliers=True, color='blue')
sns.boxplot(data=order_proto, orient="h", ax=axes[0][1], width=0.3, showfliers=True, color='blue')
sns.boxplot(data=health_flatbuf, orient="h", ax=axes[1][0], width=0.3, showfliers=True, color='orange')
sns.boxplot(data=order_flatbuf, orient="h", ax=axes[1][1], width=0.3, showfliers=True, color='orange')

# Customize each subplot (optional)
axes[0][0].set_title('Health Message Latencies on Protobuf/GRPC (ms)')
axes[0][1].set_title('Order Message Latencies on Protobuf/GRPC (ms)')
axes[1][0].set_title('Health Message Latencies on Flatbuf/ZMQ (ms)')
axes[1][1].set_title('Order Message Latencies on Flatbuf/ZMQ (ms)')

# Display the plot
plt.tight_layout()  # Ensures proper spacing between subplots
plt.show()